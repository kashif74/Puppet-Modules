<VirtualHost *:443>
    ServerName foreman.<%= domain %>

    RailsAutoDetect On
    DocumentRoot /usr/share/foreman/public

    <Directory /usr/share/foreman/public>
        Options FollowSymLinks
        DirectoryIndex index.html
        AllowOverride AuthConfig
        Order Deny,Allow
        Allow From All
    </Directory>

    SSLEngine On
    SSLCertificateFile      /var/lib/puppet/ssl/certs/<%= fqdn %>.pem
    SSLCertificateKeyFile   /var/lib/puppet/ssl/private_keys/<%= fqdn %>.pem
    SSLCertificateChainFile /var/lib/puppet/ssl/certs/ca.pem
    SSLCACertificateFile    /var/lib/puppet/ssl/certs/ca.pem
    SSLVerifyClient         optional
    SSLOptions              +StdEnvVars
    SSLVerifyDepth          3
</VirtualHost>
